define("application",["jquery"],function(a){"use strict";function b(){1===arguments.length||arguments[0]instanceof Array||arguments[0]instanceof Object||console.log("registerControllers missing or invalid param. Expected an [] or {}."),arguments[0]instanceof Array?arguments[0].forEach(function(a){c(a)}):c(arguments[0])}function c(b){var c;console.log("Registering controller '"+b.name+"'"),b.$=a,h[b.name]=b;for(var d in b.routes)b.routes.hasOwnProperty(d)&&(c=d.substring(0,d.indexOf(" ")+1)+"/",c+=b.name,c+="/"===d.substring(d.indexOf(" ")+1)?"":""===b.name?d.substring(d.indexOf(" ")+1):"/"+d.substring(d.indexOf(" ")+1),i[c]=[b.name,b.routes[d]],console.log("Registering route '"+c+"'"))}function d(){return i}function e(a){return h[a]}var f,g=window.Coccyx=window.Coccyx||{},h={},i={};g.$=a,g.userspace=g.userspace||{},g.plugins=g.plugins||{},f="0.6.0",g.getVersion=function(){return f},g.controllers={registerControllers:b,getRoutes:d,getController:e}}),define("helpers",[],function(){"use strict";var a=window.Coccyx=window.Coccyx||{};a.helpers={contains:function(a,b){var c,d;if("string"==typeof a)for(c=0,d=a.length;d>c;c++)if(a[c]===b)return!0;return!1},deepCopy:function(a){return JSON.parse(JSON.stringify(a))},extend:function(a){var b,c,d=arguments.length-1;for(c=1;d>=c;c++){var e=arguments[c];for(b in e)e.hasOwnProperty(b)&&(a[b]=e[b])}return a},replace:function(a,b){for(var c in a)a.hasOwnProperty(c)&&b.hasOwnProperty(c)&&(a[c]=b[c])}}}),define("history",["jquery","router"],function(a){"use strict";function b(a){var b,c=a.length,d={};for(b=0;c>b;b++)d[a[b].name]=a[b].value;return d}function c(){return g}function d(a,b){f.controllers.registerControllers(b),g=!0,a&&(history.replaceState({verb:"get"},null,window.location.pathname),f.router.route("get",window.location.pathname))}function e(a){f.history.started()&&(a=a||{},a.state=a.state||null,a.title=a.title||document.title,a.method=a.method||"get",a.url=a.url||window.location.pathname,a.trigger=a.trigger||!1,a.replace=a.replace||!1,window.history[a.replace?"replaceState":"pushState"](a.state,a.title,a.url),a.trigger&&f.router.route(a.method,a.url))}if(!history.pushState)throw console.log("history pushstate is not supported in your browser"),new Error("history pushstate not supported");console.log("history pushState is supported in your browser");var f=window.Coccyx=window.Coccyx||{},g=!1;a(document).on("click","a",function(b){if(0===a(this).attr("href").indexOf("/")){b.preventDefault();var c=b.currentTarget.pathname;f.router.route("get",c),history.pushState({verb:"get"},null,b.currentTarget.href)}}),a(document).on("submit","form",function(c){var d,e,g=a(this),h=g.attr("action");console.log(c),0===h.indexOf("/")&&(c.preventDefault(),d=g.attr("method"),e=b(g.serializeArray()),f.router.route(d,h,e))}),a(window).on("popstate",function(a){a.originalEvent.state&&c()&&f.router.route(a.originalEvent.state.verb,window.location.pathname)}),f.history={start:d,started:c,navigate:e}}),define("models",[],function(){"use strict";function a(a,b,c){a.emitEvent(h,{propertyPath:b,value:c,model:a})}function b(a,c){if(!Array.isArray(a)&&"object"==typeof a){var d=c.split(".");return 1===d.length?a[c]:b(a[d[0]],d.slice(1).join("."))}}function c(a,b,d){var e=b.split(".");1===e.length?a[b]="object"==typeof d?g(d):d:(a.hasOwnProperty(e[0])||(a[e[0]]={}),c(a[e[0]],e.slice(1).join("."),d))}function d(a){var b=f.helpers.extend(Object.create(f.eventer.proto),e),c=a?f.helpers.extend(b,a):b,d=Object.create(c);return d.isSet=!1,d.isReadOnly=!1,d.isDirty=!1,d.originalData={},d.changedData={},d.data={},d}var e,f=window.Coccyx=window.Coccyx||{},g=f.helpers.deepCopy,h="MODEL_PROPERTY_CHANGED_EVENT",i=-1;e={setData:function(a,b){var c={empty:!1,readOnly:!1,dirty:!1,validate:!1};return b&&f.helpers.replace(c,b),this.isValid=c.validate&&this.validate?this.validate(a):!0,this.isValid?(this.originalData=c.empty?{}:g(a),this.isReadOnly=c.readOnly,this.isDirty=c.dirty,this.data=g(a),this.modelId=this.idPropertyName&&this.data.hasOwnProperty(this.idPropertyName)?this.data[this.idPropertyName]:i--,this.changedData={},this.isSet=!0,!0):!1},getData:function(){return g(this.data)},getOriginalData:function(){return g(this.originalData)},getChangedData:function(){return g(this.changedData)},getProperty:function(a){var c=b(this.data,a);return"object"==typeof c?g(c):c},getOriginalDataProperty:function(a){var c=b(this.originalData,a);return"object"==typeof c?g(c):c},getChangedDataProperty:function(a){var c=b(this.changedData,a);return"object"==typeof c?g(c):c},setProperty:function(b,d){return this.isSet?this.isReadOnly?console.log("Warning! Coccyx.model::setProperty called on read only model."):(c(this.data,b,d),this.changedData[b]=g(d),this.isDirty=!0,this.idPropertyName&&this.data.hasOwnProperty(this.idPropertyName)&&(this.modelId=this.data[this.idPropertyName]),a(this,b,d)):console.log("Warning! Coccyx.model::setProperty called on model before model::set was called."),this},isNew:function(){return"undefined"==typeof this.data[this.idPropertyName]},toJSON:function(){return JSON.stringify(this.data)}},f.models={extend:d,propertyChangedEventTopic:h}}),define("collections",[],function(){"use strict";function a(a){var b=p.helpers.extend(Object.create(n),o),c=a?p.helpers.extend(b,a):b;c.modelsIdPropertyName="undefined"==typeof c.modelsIdPropertyName?"id":c.modelsIdPropertyName;var d=Object.create(c);return d.isReadOnly=!1,d.coll=[],d.length=0,d}function b(a){return Array.isArray(a)?a.map(function(a){return a.getData()}):void 0}function c(a,b){var e,f;if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length)return!1;for(e=0,f=a.length;f>e;e++)if("object"!=typeof a[e]||"object"!=typeof b[e]){if("object"==typeof a[e]||"object"==typeof b[e])return!1;if(Array.isArray(a[e])&&Array.isArray(b[e])){if(!c(a[e],b[e]))return!1}else{if(Array.isArray(a[e])||Array.isArray(b[e]))return!1;if(a[e]!==b[e])return!1}}else if(!d(a[e],b[e]))return!1;return!0}return!1}function d(a,b){var e;if(c(a,b))return!0;for(e in a){if(!a.hasOwnProperty(e)||!b.hasOwnProperty(e))return!1;if("object"!=typeof a[e]||"object"!=typeof b[e]){if("object"==typeof a[e]||"object"==typeof b[e])return!1;if(a[e]!==b[e])return!1}else if(!d(a[e],b[e]))return!1}return!0}function e(a,b){return d(a,b)&&d(b,a)}function f(a,b){var c;for(c in b){if(!b.hasOwnProperty(c)||!a.hasOwnProperty(c))return!1;if("object"==typeof a[c]&&"object"==typeof b[c]){if(!e(a[c],b[c]))return!1}else{if("object"==typeof a[c]||"object"==typeof b[c])return!1;if(b[c]!==a[c])return!1}}return!0}function g(a){return Array.isArray(a)||"object"!=typeof a?!0:!1}function h(a){var b,c,d=["isSet","isReadOnly","isDirty","originalData","changedData","data"];for(b=0,c=d.length;c>b;b++)if(!a.hasOwnProperty(d[b]))return!1;return!0}function i(a,b){var c=p.models.extend({idPropertyName:b});return c.setData(a),c}function j(a,b){var c,d;if(Array.isArray(a)||a.hasOwnProperty("length"))for(c=0,d=a.length;d>c;c++)j(a[c],b);else b(a)}function k(a,b){return b.handle(p.models.propertyChangedEventTopic,a.modelPropertyChangedHandler,a),b}function l(a,b){Array.isArray(b)?b.forEach(function(b){a.coll.push(k(a,h(b)?b:i(b,a.modelsIdPropertyName)))}):a.coll.push(k(a,h(b)?b:i(b,a.modelsIdPropertyName)))}function m(a,b){var c=[];return j(b,function(b){var d=h(b)?b:i(b,a.modelsIdPropertyName);c.push(k(a,d))}),c}var n,o,p=window.Coccyx=window.Coccyx||{};n={eventObject:{},handle:function(a,b,c){$(this.eventObject).on(a,c?$.proxy(b,c):b)},handleOnce:function(a,b,c){$(this.eventObject).one(a,c?$.proxy(b,c):b)},removeHandler:function(a,b){$(this.eventObject).off(a,b)},emitEvent:function(a,b){$(this.eventObject).trigger(a,b)}},o={modelPropertyChangedHandler:function(a,b){this.emitEvent(a,b)},setModels:function(a,b){return this.coll=[],l(this,a),this.isReadOnly=b&&b.readOnly,this.length=this.coll.length,this},pop:function(){var a=this.coll.pop();return this.length=this.coll.length,this.emitEvent(p.collections.removeEvent),a},push:function(a){return l(this,a),this.length=this.coll.length,this.emitEvent(p.collections.addEvent),this.length},reverse:function(){this.coll.reverse()},shift:function(){var a=this.coll.shift();return this.length=this.coll.length,this.emitEvent(p.collections.removeEvent),a},sort:function(a){this.coll.sort(function(b,c){return a(b,c)}),this.emitEvent(p.collections.sortEvent)},splice:function(a,b){var c=[a,b],d=m(this,[].slice.call(arguments,2));c=c.concat(d);var e=[].splice.apply(this.coll,c);return this.length=this.coll.length,3===arguments.length&&this.emitEvent(p.collections.addEvent),0!==b&&this.emitEvent(p.collections.removeEvent),e},unshift:function(){var a=[].unshift.apply(this.coll,m(this,arguments));return this.length=this.coll.length,this.emitEvent(p.collections.addEvent),a},getData:function(){return this.map(function(a){return a.getData()})},at:function(a){return this.coll[a]},findById:function(a){for(var b=0;b<this.length;b++)if(this.at(b).modelId===a)return this.at(b)},slice:function(){var a=this;return[].slice.apply(this.coll,arguments).map(function(b){return i(b.getData(),a.modelsIdPropertyName)})},forEach:function(){[].forEach.apply(this.coll,[].slice.call(arguments,0))},every:function(){return[].every.apply(this.coll,[].slice.call(arguments,0))},some:function(){return[].some.apply(this.coll,[].slice.call(arguments,0))},filter:function(){return[].filter.apply(this.coll,[].slice.call(arguments,0))},map:function(){return[].map.apply(this.coll,[].slice.call(arguments,0))},setReadOnly:function(a){this.coll.forEach(function(b){b.isReadOnly=a}),this.isReadOnly=a},remove:function(a){var b,c=[],d=this;if(0!==this.length&&!g(a))return b=this.coll.filter(function(b){return f(b.data,a)?(c.push(b),!1):!0}),c.length&&(c.forEach(function(a){a.removeHandler(p.models.propertyChangedEventTopic,d.modelPropertyChangedHandler)}),this.coll=b,this.length=this.coll.length,this.emitEvent(p.collections.removeEvent)),c},has:function(a){return g(a)?!1:this.coll.some(function(b){return f(b.data,a)})},find:function(a){return g(a)?null:this.coll.filter(function(b){return f(b.data,a)})},toJSON:function(){return this.coll.map(function(a){return JSON.stringify(a.getData())})},toRaw:b},p.collections={extend:a,toRaw:b,addEvent:"COLLECTION_MODEL_ADDED_EVENT",removeEvent:"COLLECTION_MODEL_REMOVED_EVENT",sortEvent:"COLLECTION_SORTED_EVENT"}}),define("router",[],function(){"use strict";function a(a,e,f){var g=b(a,e);g?c(g,f):d(a,e)}function b(a,b){var c,d,f,g,h,i,j,k,l,m=e.controllers.getRoutes(),n=b.substring(1).split("/"),o=[],p=!1;for(c in m)if(m.hasOwnProperty(c)&&(l=c.substring(0,c.indexOf(" ")),d=c.substring(c.indexOf("/")+1).split("/"),a===l&&(n.length===d.length||e.helpers.contains(c,"*")))){for(j=!0,g=0,i=d.length;i>g;g++)if(n[g]!==d[g]){if(!e.helpers.contains(d[g],":")){if(e.helpers.contains(d[g],"*")){p=!0,j=!1;break}j=!1;break}f=d[g].split(":"),2===f.length?n[g].substr(0,f[0].length)===f[0]&&o.push(n[g].substr(f[0].length)):o.push(n[g])}if(j)return{controllerName:m[c][0],fn:m[c][1],params:o};if(p){for(h=g,k="";h<n.length;h++)k+="/"+n[h];return{controllerName:m[c][0],fn:m[c][1],params:[k]}}}}function c(a,b){var c=e.controllers.getController(a.controllerName);c.hasOwnProperty("init")&&!c.hasOwnProperty("initCalled")&&(c.init(),c.initCalled=!0),b?a.fn.call(c,b):a.params.length?a.fn.apply(c,a.params):a.fn.call(c)}function d(a){console.log("router::routeNotFound called with route = "+a)}var e=window.Coccyx=window.Coccyx||{};e.router={route:a}}),define("views",["jquery"],function(a){"use strict";function b(a,b,c){var d,e;for(d in a.events)a.events.hasOwnProperty(d)&&(e=d.split(" "),b.on(e[0]+c,e[1],a.events[d].bind(a.controller)))}function c(){this.$domTarget&&this.$domTarget instanceof f.$?this.domTarget=this.$domTarget[0]:this.domTarget?(this.domTarget=document.createElement("string"==typeof this.domTarget?this.domTarget:this.domTarget()),this.$domTarget=f.$(this.domTarget)):this.domTargetAttrs?(this.$domTarget=f.$(document.createElement(this.tagName?this.tagName:"div")).attr(this.domTargetAttrs),this.domTarget=this.$domTarget[0]):(this.domTarget=document.createElement("div"),this.$domTarget=f.$(this.domTarget))}function d(a,d){var g=f.helpers.extend(Object.create(e),a),h=Object.create(g);return c.call(h),d&&(h.namespace="."+Date.now().toString(),b("function"==typeof d?d():d,h.$domTarget,h.namespace)),h}var e,f=window.Coccyx=window.Coccyx||{},g="DOM_EVENT";e={remove:function(){this.$domTarget.off(this.namespace),this.$domTarget.empty()},$:a},f.views={extend:d,domEventTopic:g}}),define("eventer",["jquery"],function(a){"use strict";function b(a){return d.helpers.extend(Object.create(c),a)}var c,d=window.Coccyx=window.Coccyx||{};c={handle:function(b,c,d){a(this).on(b,d?a.proxy(c,d):c)},handleOnce:function(b,c,d){a(this).one(b,d?a.proxy(c,d):c)},removeHandler:function(b,c){a(this).off(b,c)},emitEvent:function(b,c){a(this).trigger(b,c)}},d.eventer={extend:b},d.eventer.proto=c}),define("ajax",["jquery"],function(a){"use strict";var b=window.Coccyx=window.Coccyx||{};b.ajax={ajaxGet:function(b,c){return a.ajax({type:"GET",url:b,data:c})},ajaxPost:function(b,c){return a.ajax({type:"POST",url:b,data:c})},ajaxPut:function(b,c){return a.ajax({type:"PUT",url:b,data:c})},ajaxDelete:function(b,c){return a.ajax({type:"DELETE",url:b,data:c})}}}),define("pubsub",[],function(){"use strict";function a(){for(var a;;)if(a=Date.now().valueOf(),a!==k)return k=a,a}function b(a,b){return function(a,c){setTimeout(function(){b(a,c)},1)}}function c(c,d){var e=a(),f={context:null,async:!0},g=3===arguments.length?h.helpers.extend({},f,arguments[2]):f,k=g.context?d.bind(g.context):d;return k=g.async?b(c,k):k,i.hasOwnProperty(c)||(i[c]={}),i[c][e]=k,j++,e}function d(a,b){i.hasOwnProperty(a)&&i[a].hasOwnProperty(b)&&(delete i[a][b],j--)}function e(a,b){var c;if(i.hasOwnProperty(a))for(c in i[a])i[a].hasOwnProperty(c)&&(b?i[a][c](a,b):i[a][c](a))}function f(){return j}function g(a){var b,c=0;if(i.hasOwnProperty(a))for(b in i[a])i[a].hasOwnProperty(b)&&c++;return c}var h=window.Coccyx=window.Coccyx||{},i={},j=0,k=0;h.pubsub={subscribe:c,unsubscribe:d,publish:e,getCountOfSubscribers:f,getCountOfSubscribersByTopic:g}}),define("coccyx",["application","helpers","history","models","collections","router","views","eventer","pubsub"],function(){"use strict";return window.Coccyx});